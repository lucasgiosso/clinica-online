
<body>
  <app-loading *ngIf="showLoading" class="centered-loading"></app-loading>

  <div class="navbar-custom">
    <a class="user-color" (click)="toggleDropdown()" *ngIf="currentUser$ | async as user" >
      <img *ngIf="user.photoURL" src="{{user.photoURL}}" alt="Foto de perfil de usuario" class="user-photo">
      <img *ngIf="!user.photoURL" src="https://firebasestorage.googleapis.com/v0/b/tp-sala-de-juegos-diazgiossol.appspot.com/o/guest.webp?alt=media&token=69e91e4a-832d-4439-ab69-a30e2c8d80ee"  class="user-photo">
      {{ user.displayName?user.displayName : user.email }} 
    </a>
    <div class="dropdown-content" *ngIf="isDropdownOpen">
      <button class="logout-button" *ngIf="showLogoutButton" (click)="logout()">
        <i class="fa solid fa-power-off"></i> Cerrar Sesi√≥n
      </button>
    </div>
  </div>
  
  <form [formGroup]="solicitarTurnoForm">
    
    <div class="centered-content">

      <label for="especialidad">Seleccione su especialidad:</label>
    <div class="especialidades-container">
      <button type="button"  *ngFor="let especialista  of especialidades; let i = index" (click)="toggleEspecialidad(i)" (click)="onEspecialidadChange(especialista )" (click)="onEspecialidadButtonClick(especialista )" [class.selected]="especialista  === seleccionado">
        <p>{{ especialista  }}</p>
        <img [src]="obtenerImagenEspecialidad(especialista )" alt="{{ especialista  }}" class="especialidad-button">
      </button>
    </div>

    
    <ng-container *ngIf="especialidadSeleccionada">
     <label for="especialista">Seleccione un especialista:</label>

     <div class="especialistas-container">
      <button type="button" *ngFor="let especialista of especialistas" (click)="onEspecialidadButtonClick1(especialista)" [class.selected]="especialista === especialistaSeleccionado">
        <p>{{ especialista.nombre }} {{ especialista.apellido }}</p>
        <img [src]="especialista.imagenPerfil" alt="{{ especialista.imagenPerfil }}" class="especialidad-image">
        <img [src]="getSafeImageURL(especialista.imagenPerfil)" alt="{{ especialista.nombre }}"  class="especialidad-button1">
      </button>
    </div>
  </ng-container>
    
    <ng-container *ngIf="especialistaSeleccionado && turnosDisponibles.length > 0">
      <h3>Turnos Disponibles</h3>
      <ul>
        <div class="horarios-container">
          <button type="button" 
                  *ngFor="let turno of turnosDisponibles"
                  (click)="onTurnoSeleccionado(turno)"
                  [class.selected-turno]="turno === turnoSeleccionado">
                  {{ turno.dias[0] }} - {{ turno.horaInicio }} a {{ turno.horaFin }}
          </button>
        </div>
      </ul>
    </ng-container>

    <!-- <div *ngIf="turnoSeleccionado">
      <h4>Detalles del turno seleccionado:</h4>
      <p>Fecha: {{ solicitarTurnoForm.get('date')?.value }}</p>
      <p>Hora de inicio: {{ solicitarTurnoForm.get('horaInicio')?.value }}</p>
      <p>Hora fin: {{ solicitarTurnoForm.get('horaFin')?.value }}</p>
    </div> -->

  </div>
</form>

<footer class="site-footer">
  <div class="container">
    <p>&copy; 2024 Clinica Online. Todos los derechos reservados.</p>
  </div>
</footer>

</body>


<div class="center-button">
    <button type="submit" class="btn-solicitar" (click)="guardarTurno()">Solicitar Turno</button>
    <input type="button" [value]="btnVolver" class="btn-success" (click)="onClickHome($event)" />
</div>
  